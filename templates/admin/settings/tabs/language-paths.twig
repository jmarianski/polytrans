{% set assistants_mapping = settings.assistants_mapping|default(settings.openai_assistants|default({})) %}
{% set path_rules = settings.translation_path_rules|default(settings.openai_path_rules|default({})) %}

<h2>{{ __('Translation Path Rules', 'polytrans') }}</h2>
<p class="description">
    {{ __('Define routing rules for translations. Use intermediate languages for better quality (e.g., PL → EN → FR instead of direct PL → FR).', 'polytrans') }}
</p>

<div id="path-rules-container">
    {{ include('admin/settings/tabs/path-rules-table.twig', {
        'rules': path_rules,
        'langs': langs,
        'lang_names': lang_names
    }) }}
</div>

<button type="button" id="add-path-rule" class="button" style="margin-top: 10px;">
    {{ __('Add Rule', 'polytrans') }}
</button>

<hr style="margin: 30px 0;">

<h2>{{ __('Provider/Assistant Mapping', 'polytrans') }}</h2>
<p class="description">
    {{ __('Select which translation provider or assistant to use for each language pair. You can choose from translation providers (like Google Translate) or AI assistants (Managed or Provider API assistants).', 'polytrans') }}
</p>

<div id="assistants-loading" style="display:none; padding: 10px; background: #f0f0f1; margin: 10px 0;">
    <p><em>{{ __('Loading providers and assistants...', 'polytrans') }}</em></p>
</div>

<div id="assistants-error" style="display:none; padding: 10px; background: #f8d7da; color: #721c24; margin: 10px 0;">
    <p>{{ __('Unable to load providers and assistants. Please check your API keys in provider configuration tabs if you want to use AI assistants.', 'polytrans') }}</p>
</div>

<div id="assistants-mapping-container">
    {{ include('admin/settings/tabs/assistant-mapping-table.twig', {
        'assistants_mapping': assistants_mapping,
        'langs': langs,
        'lang_names': lang_names
    }) }}
</div>

